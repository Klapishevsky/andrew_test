{
  "version": 3,
  "sources": ["../../../../app/routes/prods.$id.jsx"],
  "sourcesContent": ["import {useLoaderData} from '@remix-run/react';\nimport ProductOptions from '~/components/ProductOptions';\nimport {MediaFile, Money, ProductPrice} from '@shopify/hydrogen-react';\nimport {json} from '@shopify/remix-oxygen';\n\nexport async function loader({params, context, request}) {\n    const {id} = params;\n    const searchParams = new URL(request.url).searchParams;\n    const selectedOptions = [];\n\n    // set selected options from the query string\n    searchParams.forEach((value, name) => {\n      selectedOptions.push({name, value});\n    });\n    \n    const {product} = await context.storefront.query(PRODUCT_QUERY, {\n      variables: {\n        id: \"gid://shopify/Product/\" + id,\n        selectedOptions,\n      },\n    });\n  \n    if (!product?.id) {\n      throw new Response(null, {status: 404});\n    }\n    const selectedVariant =\n    product.selectedVariant ?? product?.variants?.nodes[0];\n    return json({\n        product,\n        selectedVariant,\n    });\n  }\n  function PrintJson({data}) {\n    return (\n      <details className=\"outline outline-2 outline-blue-300 p-4 my-2\">\n        <summary>Product JSON</summary>\n        <pre>{JSON.stringify(data, null, 2)}</pre>\n      </details>\n    );\n  }\n\n  export default function ProductHandle() {\n    \n    const {product, selectedVariant} = useLoaderData();\n\n    const isDiscounted = selectedVariant.compareAtPrice != null;\n    return (\n      <section className=\"w-full gap-4 md:gap-8 grid px-6 md:px-8 lg:px-12\">\n        <div className=\"grid items-start gap-6 lg:gap-20 md:grid-cols-2 lg:grid-cols-3\">\n          <div className=\"grid md:grid-flow-row  md:p-0 md:overflow-x-hidden md:grid-cols-2 md:w-full lg:col-span-2\">\n            <div className=\"md:col-span-2 snap-center card-image aspect-square md:w-full w-[80vw] shadow rounded\">\n            <ProductGallery media={product.media.nodes} />\n            </div>\n          </div>\n          <div className=\"md:sticky md:mx-auto max-w-xl md:max-w-[24rem] grid gap-8 p-0 md:p-6 md:px-0 top-[6rem] lg:top-[8rem] xl:top-[10rem]\">\n            <div className=\"grid gap-2\">\n              <h1 className=\"text-4xl font-bold leading-10 whitespace-normal\">\n                {product.title}\n              </h1>\n              <p> {isDiscounted \n                    ? <div><span>Old Price:</span>\n                    <Money\n                    className=\"line-through opacity-50\"\n                    withoutTrailingZeros\n                    data={selectedVariant.compareAtPrice}\n                    />\n                    <p> New Price: <Money\n                        withoutTrailingZeros\n                        data={selectedVariant.price}\n                        className=\"text-xl font-semibold mb-2\"\n                        /></p>\n                    </div>\n                    : <div>\n                        <p>Price: <Money\n                        withoutTrailingZeros\n                        data={selectedVariant.price}\n                        className=\"text-xl font-semibold mb-2\"\n                        /></p>\n                      </div>\n              }</p>\n              <span className=\"max-w-prose whitespace-pre-wrap inherit text-copy opacity-50 font-medium\">\n                {product.vendor}\n              </span>\n            </div>\n            <ProductOptions\n            options={product.options}\n            selectedVariant={selectedVariant}\n            />\n            {/* Delete this after verifying */}\n            <p>Selected Variant: {product.selectedVariant?.id}</p>\n           \n            <div\n            className=\"prose border-t border-gray-200 pt-6 text-black text-md\"\n            dangerouslySetInnerHTML={{ __html: product.descriptionHtml }}\n            />\n          </div>\n        </div>\n      </section>\n    )\n  }\n  function ProductGallery({media}) {\n    if (!media.length) {\n      return null;\n    }\n  \n    const typeNameMap = {\n      MODEL_3D: 'Model3d',\n      VIDEO: 'Video',\n      IMAGE: 'MediaImage',\n      EXTERNAL_VIDEO: 'ExternalVideo',\n    };\n  \n    return (\n      <div\n        className={`grid gap-4 overflow-x-scroll grid-flow-col md:grid-flow-row  md:p-0 md:overflow-x-auto md:grid-cols-2 w-[90vw] md:w-full lg:col-span-2`}\n      >\n        {media.map((med, i) => {\n          let extraProps = {};\n  \n          if (med.mediaContentType === 'MODEL_3D') {\n            extraProps = {\n              interactionPromptThreshold: '0',\n              ar: true,\n              loading: 'eager',\n              disableZoom: true,\n              style: {height: '100%', margin: '0 auto'},\n            };\n          }\n  \n          const data = {\n            ...med,\n            __typename: typeNameMap[med.mediaContentType] || typeNameMap['IMAGE'],\n            image: {\n              ...med.image,\n              altText: med.alt || 'Product image',\n            },\n          };\n  \n          return (\n            <div\n              className={`${\n                i % 3 === 0 ? 'md:col-span-2' : 'md:col-span-1'\n              } snap-center card-image bg-white aspect-square md:w-full w-[80vw] shadow-sm rounded`}\n              key={data.id || data.image.id}\n            >\n              <MediaFile\n                tabIndex=\"0\"\n                className={`w-full h-full aspect-square object-cover`}\n                data={data}\n                {...extraProps}\n              />\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n  const PRODUCT_QUERY = `#graphql\n  query product($id: ID!, $selectedOptions: [SelectedOptionInput!]!) {\n    product(id: $id) {\n      id\n      title\n      handle\n      vendor\n      descriptionHtml\n      media(first: 10) {\n        nodes {\n          ... on MediaImage {\n            mediaContentType\n            image {\n              id\n              url\n              altText\n              width\n              height\n            }\n          }\n          ... on Model3d {\n            id\n            mediaContentType\n            sources {\n              mimeType\n              url\n            }\n          }\n        }\n      }\n      options {\n        name,\n        values\n      }\n      selectedVariant: variantBySelectedOptions(selectedOptions: $selectedOptions) {\n        id\n        availableForSale\n        selectedOptions {\n          name\n          value\n        }\n        image {\n          id\n          url\n          altText\n          width\n          height\n        }\n        price {\n          amount\n          currencyCode\n        }\n        compareAtPrice {\n          amount\n          currencyCode\n        }\n        sku\n        title\n        unitPrice {\n          amount\n          currencyCode\n        }\n        product {\n          title\n          handle\n        }\n      }\n      variants(first: 1) {\n        nodes {\n          id\n          title\n          availableForSale\n          price {\n            currencyCode\n            amount\n          }\n          compareAtPrice {\n            currencyCode\n            amount\n          }\n          selectedOptions {\n            name\n            value\n          }\n        }\n      }\n    }\n  }\n`;\n"],
  "mappings": "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",
  "names": []
}
