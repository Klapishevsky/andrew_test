{
  "version": 3,
  "sources": ["../../../../app/components/ProductOptions.jsx", "../../../../app/routes/products.$handle.jsx"],
  "sourcesContent": ["import {\n    Link,\n    useLocation,\n    useSearchParams,\n    useNavigation,\n} from '@remix-run/react';\nexport default function ProductOptions({options, selectedVariant}) {\n    const {pathname, search} = useLocation();\n    const [currentSearchParams] = useSearchParams();\n    const navigation = useNavigation();\n  \n    const paramsWithDefaults = (() => {\n      const defaultParams = new URLSearchParams(currentSearchParams);\n  \n      if (!selectedVariant) {\n        return defaultParams;\n      }\n  \n      for (const {name, value} of selectedVariant.selectedOptions) {\n        if (!currentSearchParams.has(name)) {\n          defaultParams.set(name, value);\n        }\n      }\n  \n      return defaultParams;\n    })();\n  \n    // Update the in-flight request data from the 'navigation' (if available)\n    // to create an optimistic UI that selects a link before the request is completed\n    const searchParams = navigation.location\n      ? new URLSearchParams(navigation.location.search)\n      : paramsWithDefaults;\n  \n    return (\n    <div className=\"grid gap-4 mb-6\">\n      {options.map((option) => {\n        if (!option.values.length) {\n          return;\n        }\n\n        // get the currently selected option value\n        const currentOptionVal = searchParams.get(option.name);\n        return (\n          <div\n            key={option.name}\n            className=\"flex flex-col flex-wrap mb-4 gap-y-2 last:mb-0\"\n          >\n            <h3 className=\"whitespace-pre-wrap max-w-prose font-bold text-lead min-w-[4rem]\">\n              {option.name}\n            </h3>\n\n            <div className=\"flex flex-wrap items-baseline gap-4\">\n              {option.values.map((value) => {\n                const linkParams = new URLSearchParams(searchParams);\n                const isSelected = currentOptionVal === value;\n                linkParams.set(option.name, value);\n                return (\n                  <Link\n                    key={value}\n                    to={`${pathname}?${linkParams.toString()}`}\n                    preventScrollReset\n                    replace\n                    className={`leading-none py-1 border-b-[1.5px] cursor-pointer transition-all duration-200 ${\n                      isSelected ? 'border-gray-500' : 'border-neutral-50'\n                    }`}\n                  >\n                    {value}\n                  </Link>\n                );\n              })}\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n}", "import {useLoaderData} from '@remix-run/react';\nimport ProductOptions from '~/components/ProductOptions';\nimport {MediaFile, Money, ProductPrice} from '@shopify/hydrogen-react';\nimport {json} from '@shopify/remix-oxygen';\n\nexport async function loader({params, context, request}) {\n    const {handle} = params;\n    const searchParams = new URL(request.url).searchParams;\n    const selectedOptions = [];\n    // set selected options from the query string\n    searchParams.forEach((value, name) => {\n      selectedOptions.push({name, value});\n    });\n  \n    const {product} = await context.storefront.query(PRODUCT_QUERY, {\n      variables: {\n        handle,\n        selectedOptions,\n      },\n    });\n  \n    if (!product?.id) {\n      throw new Response(null, {status: 404});\n    }\n    const selectedVariant =\n    product.selectedVariant ?? product?.variants?.nodes[0];\n    return json({\n        product,\n        selectedVariant,\n    });\n  }\n  function PrintJson({data}) {\n    return (\n      <details className=\"outline outline-2 outline-blue-300 p-4 my-2\">\n        <summary>Product JSON</summary>\n        <pre>{JSON.stringify(data, null, 2)}</pre>\n      </details>\n    );\n  }\n\n  export default function ProductHandle() {\n    const {product, selectedVariant} = useLoaderData();\n    if (selectedVariant.compareAtPrice.amount != null) {\n        comparePrice = selectedVariant.compareAtPrice.amount;\n    }\n    else{\n        comparePrice = 0;\n    }\n    return (\n      <section className=\"w-full gap-4 md:gap-8 grid px-6 md:px-8 lg:px-12\">\n        <div className=\"grid items-start gap-6 lg:gap-20 md:grid-cols-2 lg:grid-cols-3\">\n          <div className=\"grid md:grid-flow-row  md:p-0 md:overflow-x-hidden md:grid-cols-2 md:w-full lg:col-span-2\">\n            <div className=\"md:col-span-2 snap-center card-image aspect-square md:w-full w-[80vw] shadow rounded\">\n            <ProductGallery media={product.media.nodes} />\n            </div>\n          </div>\n          <div className=\"md:sticky md:mx-auto max-w-xl md:max-w-[24rem] grid gap-8 p-0 md:p-6 md:px-0 top-[6rem] lg:top-[8rem] xl:top-[10rem]\">\n            <div className=\"grid gap-2\">\n              <h1 className=\"text-4xl font-bold leading-10 whitespace-normal\">\n                {product.title}\n              </h1>\n              \n              <p>Old Price: {selectedVariant.compareAtPrice.amount}</p>\n              <p>New Price: <Money\n                withoutTrailingZeros\n                data={selectedVariant.price}\n                className=\"text-xl font-semibold mb-2\"\n                /></p>\n              <span className=\"max-w-prose whitespace-pre-wrap inherit text-copy opacity-50 font-medium\">\n                {product.vendor}\n              </span>\n            </div>\n            <ProductOptions\n            options={product.options}\n            selectedVariant={selectedVariant}\n            />\n            {/* Delete this after verifying */}\n            <p>Selected Variant: {product.selectedVariant?.id}</p>\n           \n            <div\n            className=\"prose border-t border-gray-200 pt-6 text-black text-md\"\n            dangerouslySetInnerHTML={{ __html: product.descriptionHtml }}\n            />\n          </div>\n        </div>\n      </section>\n    )\n  }\n  function ProductGallery({media}) {\n    if (!media.length) {\n      return null;\n    }\n  \n    const typeNameMap = {\n      MODEL_3D: 'Model3d',\n      VIDEO: 'Video',\n      IMAGE: 'MediaImage',\n      EXTERNAL_VIDEO: 'ExternalVideo',\n    };\n  \n    return (\n      <div\n        className={`grid gap-4 overflow-x-scroll grid-flow-col md:grid-flow-row  md:p-0 md:overflow-x-auto md:grid-cols-2 w-[90vw] md:w-full lg:col-span-2`}\n      >\n        {media.map((med, i) => {\n          let extraProps = {};\n  \n          if (med.mediaContentType === 'MODEL_3D') {\n            extraProps = {\n              interactionPromptThreshold: '0',\n              ar: true,\n              loading: 'eager',\n              disableZoom: true,\n              style: {height: '100%', margin: '0 auto'},\n            };\n          }\n  \n          const data = {\n            ...med,\n            __typename: typeNameMap[med.mediaContentType] || typeNameMap['IMAGE'],\n            image: {\n              ...med.image,\n              altText: med.alt || 'Product image',\n            },\n          };\n  \n          return (\n            <div\n              className={`${\n                i % 3 === 0 ? 'md:col-span-2' : 'md:col-span-1'\n              } snap-center card-image bg-white aspect-square md:w-full w-[80vw] shadow-sm rounded`}\n              key={data.id || data.image.id}\n            >\n              <MediaFile\n                tabIndex=\"0\"\n                className={`w-full h-full aspect-square object-cover`}\n                data={data}\n                {...extraProps}\n              />\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n  const PRODUCT_QUERY = `#graphql\n  query product($handle: String!, $selectedOptions: [SelectedOptionInput!]!) {\n    product(handle: $handle) {\n      id\n      title\n      handle\n      vendor\n      descriptionHtml\n      media(first: 10) {\n        nodes {\n          ... on MediaImage {\n            mediaContentType\n            image {\n              id\n              url\n              altText\n              width\n              height\n            }\n          }\n          ... on Model3d {\n            id\n            mediaContentType\n            sources {\n              mimeType\n              url\n            }\n          }\n        }\n      }\n      options {\n        name,\n        values\n      }\n      selectedVariant: variantBySelectedOptions(selectedOptions: $selectedOptions) {\n        id\n        availableForSale\n        selectedOptions {\n          name\n          value\n        }\n        image {\n          id\n          url\n          altText\n          width\n          height\n        }\n        price {\n          amount\n          currencyCode\n        }\n        compareAtPrice {\n          amount\n          currencyCode\n        }\n        sku\n        title\n        unitPrice {\n          amount\n          currencyCode\n        }\n        product {\n          title\n          handle\n        }\n      }\n      variants(first: 1) {\n        nodes {\n          id\n          title\n          availableForSale\n          price {\n            currencyCode\n            amount\n          }\n          compareAtPrice {\n            currencyCode\n            amount\n          }\n          selectedOptions {\n            name\n            value\n          }\n        }\n      }\n    }\n  }\n`;\n"],
  "mappings": ";;;;;;;;;;;;;;;;;AA+CY;AAzCG,SAAR,eAAgC,EAAC,SAAS,gBAAe,GAAG;AAC/D,QAAM,EAAC,UAAU,OAAM,IAAI,YAAY;AACvC,QAAM,CAAC,mBAAmB,IAAI,gBAAgB;AAC9C,QAAM,aAAa,cAAc;AAEjC,QAAM,sBAAsB,MAAM;AAChC,UAAM,gBAAgB,IAAI,gBAAgB,mBAAmB;AAE7D,QAAI,CAAC,iBAAiB;AACpB,aAAO;AAAA,IACT;AAEA,eAAW,EAAC,MAAM,MAAK,KAAK,gBAAgB,iBAAiB;AAC3D,UAAI,CAAC,oBAAoB,IAAI,IAAI,GAAG;AAClC,sBAAc,IAAI,MAAM,KAAK;AAAA,MAC/B;AAAA,IACF;AAEA,WAAO;AAAA,EACT,GAAG;AAIH,QAAM,eAAe,WAAW,WAC5B,IAAI,gBAAgB,WAAW,SAAS,MAAM,IAC9C;AAEJ,SACA,mDAAC,SAAI,WAAU,mBACZ,kBAAQ,IAAI,CAAC,WAAW;AACvB,QAAI,CAAC,OAAO,OAAO,QAAQ;AACzB;AAAA,IACF;AAGA,UAAM,mBAAmB,aAAa,IAAI,OAAO,IAAI;AACrD,WACE;AAAA,MAAC;AAAA;AAAA,QAEC,WAAU;AAAA,QAEV;AAAA,6DAAC,QAAG,WAAU,oEACX,iBAAO,QADV;AAAA;AAAA;AAAA;AAAA,iBAEA;AAAA,UAEA,mDAAC,SAAI,WAAU,uCACZ,iBAAO,OAAO,IAAI,CAAC,UAAU;AAC5B,kBAAM,aAAa,IAAI,gBAAgB,YAAY;AACnD,kBAAM,aAAa,qBAAqB;AACxC,uBAAW,IAAI,OAAO,MAAM,KAAK;AACjC,mBACE;AAAA,cAAC;AAAA;AAAA,gBAEC,IAAI,GAAG,YAAY,WAAW,SAAS;AAAA,gBACvC,oBAAkB;AAAA,gBAClB,SAAO;AAAA,gBACP,WAAW,iFACT,aAAa,oBAAoB;AAAA,gBAGlC;AAAA;AAAA,cARI;AAAA,cADP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAUA;AAAA,UAEJ,CAAC,KAlBH;AAAA;AAAA;AAAA;AAAA,iBAmBA;AAAA;AAAA;AAAA,MA1BK,OAAO;AAAA,MADd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA4BA;AAAA,EAEJ,CAAC,KAvCH;AAAA;AAAA;AAAA;AAAA,SAwCA;AAEJ;;;AC1CQ,IAAAA,0BAAA;AAMS,SAAR,gBAAiC;AACtC,QAAM,EAAC,SAAS,gBAAe,IAAI,cAAc;AACjD,MAAI,gBAAgB,eAAe,UAAU,MAAM;AAC/C,mBAAe,gBAAgB,eAAe;AAAA,EAClD,OACI;AACA,mBAAe;AAAA,EACnB;AACA,SACE,oDAAC,aAAQ,WAAU,oDACjB,8DAAC,SAAI,WAAU,kEACb;AAAA,wDAAC,SAAI,WAAU,6FACb,8DAAC,SAAI,WAAU,wFACf,8DAAC,kBAAe,OAAO,QAAQ,MAAM,SAArC;AAAA;AAAA;AAAA;AAAA,WAA4C,KAD5C;AAAA;AAAA;AAAA;AAAA,WAEA,KAHF;AAAA;AAAA;AAAA;AAAA,WAIA;AAAA,IACA,oDAAC,SAAI,WAAU,wHACb;AAAA,0DAAC,SAAI,WAAU,cACb;AAAA,4DAAC,QAAG,WAAU,mDACX,kBAAQ,SADX;AAAA;AAAA;AAAA;AAAA,eAEA;AAAA,QAEA,oDAAC,OAAE;AAAA;AAAA,UAAY,gBAAgB,eAAe;AAAA,aAA9C;AAAA;AAAA;AAAA;AAAA,eAAqD;AAAA,QACrD,oDAAC,OAAE;AAAA;AAAA,UAAW;AAAA,YAAC;AAAA;AAAA,cACb,sBAAoB;AAAA,cACpB,MAAM,gBAAgB;AAAA,cACtB,WAAU;AAAA;AAAA,YAHE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAIZ;AAAA,aAJF;AAAA;AAAA;AAAA;AAAA,eAII;AAAA,QACJ,oDAAC,UAAK,WAAU,4EACb,kBAAQ,UADX;AAAA;AAAA;AAAA;AAAA,eAEA;AAAA,WAbF;AAAA;AAAA;AAAA;AAAA,aAcA;AAAA,MACA;AAAA,QAAC;AAAA;AAAA,UACD,SAAS,QAAQ;AAAA,UACjB;AAAA;AAAA,QAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAGA;AAAA,MAEA,oDAAC,OAAE;AAAA;AAAA,QAAmB,QAAQ,iBAAiB;AAAA,WAA/C;AAAA;AAAA;AAAA;AAAA,aAAkD;AAAA,MAElD;AAAA,QAAC;AAAA;AAAA,UACD,WAAU;AAAA,UACV,yBAAyB,EAAE,QAAQ,QAAQ,gBAAgB;AAAA;AAAA,QAF3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAGA;AAAA,SA1BF;AAAA;AAAA;AAAA;AAAA,WA2BA;AAAA,OAjCF;AAAA;AAAA;AAAA;AAAA,SAkCA,KAnCF;AAAA;AAAA;AAAA;AAAA,SAoCA;AAEJ;AACA,SAAS,eAAe,EAAC,MAAK,GAAG;AAC/B,MAAI,CAAC,MAAM,QAAQ;AACjB,WAAO;AAAA,EACT;AAEA,QAAM,cAAc;AAAA,IAClB,UAAU;AAAA,IACV,OAAO;AAAA,IACP,OAAO;AAAA,IACP,gBAAgB;AAAA,EAClB;AAEA,SACE;AAAA,IAAC;AAAA;AAAA,MACC,WAAW;AAAA,MAEV,gBAAM,IAAI,CAAC,KAAK,MAAM;AACrB,YAAI,aAAa,CAAC;AAElB,YAAI,IAAI,qBAAqB,YAAY;AACvC,uBAAa;AAAA,YACX,4BAA4B;AAAA,YAC5B,IAAI;AAAA,YACJ,SAAS;AAAA,YACT,aAAa;AAAA,YACb,OAAO,EAAC,QAAQ,QAAQ,QAAQ,SAAQ;AAAA,UAC1C;AAAA,QACF;AAEA,cAAM,OAAO;AAAA,UACX,GAAG;AAAA,UACH,YAAY,YAAY,IAAI,qBAAqB,YAAY;AAAA,UAC7D,OAAO;AAAA,YACL,GAAG,IAAI;AAAA,YACP,SAAS,IAAI,OAAO;AAAA,UACtB;AAAA,QACF;AAEA,eACE;AAAA,UAAC;AAAA;AAAA,YACC,WAAW,GACT,IAAI,MAAM,IAAI,kBAAkB;AAAA,YAIlC;AAAA,cAAC;AAAA;AAAA,gBACC,UAAS;AAAA,gBACT,WAAW;AAAA,gBACX;AAAA,gBACC,GAAG;AAAA;AAAA,cAJN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAKA;AAAA;AAAA,UAPK,KAAK,MAAM,KAAK,MAAM;AAAA,UAJ7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAYA;AAAA,MAEJ,CAAC;AAAA;AAAA,IAxCH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAyCA;AAEJ;",
  "names": ["import_jsx_dev_runtime"]
}
