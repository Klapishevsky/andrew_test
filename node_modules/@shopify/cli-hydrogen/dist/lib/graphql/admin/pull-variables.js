import { adminRequest } from '../../graphql.js';

const PullVariablesQuery = `#graphql
  query PullVariables($id: ID!, $branch: String) {
    hydrogenStorefront(id: $id) {
      id
      environmentVariables(branchName: $branch) {
        id
        isSecret
        key
        value
      }
    }
  }
`;
async function getStorefrontEnvVariables(adminSession, storefrontId, envBranch) {
  const { hydrogenStorefront } = await adminRequest(
    PullVariablesQuery,
    adminSession,
    {
      id: storefrontId,
      branch: envBranch
    }
  );
  return { storefront: hydrogenStorefront };
}

export { PullVariablesQuery, getStorefrontEnvVariables };
